<div class="container-fluid">
    <div class="row">
        <div class="col">
            <h1 class="text-center">Gerenciando Clientes</h1>
            <br />
        </div>
    </div>
    <div class="row">
        <div class="col">
            <form class="row g-3 " [formGroup]="crudFormCustomer" (ngSubmit)="onSubmit()"  style="max-width: 90%;">
                <h5 [ngStyle]="{'display': editedCustomer == false ? 'block' : 'none'}">Cadastre um novo cliente</h5>
                <h5 [ngStyle]="{'display': !editedCustomer == false ? 'block' : 'none'}">Atualize os dados do cliente</h5>
                <input type="hidden"  id="id" value="{{this.editedCustomer.id}}" formControlName="id" name="id" />

                <div class="col-md-12">
                    <label for="name" class="form-label">Nome:</label>
                    <input type="text" value="{{this.editedCustomer.name}}" formControlName="name"  class="form-control" id="name">
                </div>

                <div class="col-md-12">
                    <label for="email" class="form-label">Email: </label>
                    <input type="text" value="{{this.editedCustomer.email}}"  formControlName="email" class="form-control" id="email">
                </div>

                <div class="col-md-6">
                    <label for="birthday" class="form-label">Aniversário: </label>
                    <input type="text" value="{{this.editedCustomer.birthday}}"  formControlName="birthday" class="form-control" id="birthday">
                </div>

                <div class="col-md-6">
                    <label for="phone" class="form-label">Telefone: </label>
                    <input type="text" value="{{this.editedCustomer.phone}}"  formControlName="phone" class="form-control" id="phone">
                </div>

                <div class="col-md-6">
                    <label for="city" class="form-label">Cidade: </label>
                    <input type="text" value="{{this.editedCustomer.city}}"  formControlName="city" class="form-control" id="city">
                </div>

                <div class="col-md-6">
                    <label for="state" class="form-label">Estado: </label>
                    <input type="text" value="{{this.editedCustomer.state}}"  formControlName="state" class="form-control" id="state">
                </div>

                <div class="col-md-12">
                    <div style="margin-bottom:10px;">
                        Planos:
                    </div>
                    <div *ngFor="let plan of plans" class="btn-group btn-group-toggle" data-toggle="buttons">
                        <label class="btn btn-secondary active" for="plan_{{plan.id}}" style="margin-right:10px; margin-bottom:10px;">
                            <input type="checkbox" value="{{plan.id}}" ng-model="plans" name="plans" id="plan_{{plan.id}}" class="form-check-input plans" />
                            {{plan.name}}
                        </label>
                    </div>
                </div>

                <div class="col-12">
                    <input type="hidden" value="{{this.editedCustomer==false ? 'new' : 'edit'}}" id="action" name="action" />
                    <button type="submit" class="btn btn-primary" style="float:left; margin-right:10px;">
                        <span [style]="{display: this.editedCustomer==false ? 'block' : 'none'}">Inserir</span>
                        <span [style]="{display: !this.editedCustomer==false ? 'block' : 'none'}">Atualizar</span>
                    </button>
                    <button type="button" class="btn btn-secondary float-left" [style]="{display: !this.editedCustomer==false ? 'block' : 'none'}" (click)="this.reset();">
                        Cancelar
                    </button>
                </div>
            </form>

        </div>
        <div class="col">
            <h5>Todos os customeros registrados:</h5>
            <table class="table table-striped table-hover table-sm">
                <thead>
                <tr>
                    <th width="5%" scope="col" style="text-align: center !important;">#</th>
                    <th width="30%" scope="col">Nome</th>
                    <th width="35%" scope="col">Email</th>
                    <th width="20%" scope="col">Telefone</th>
                    <th width="10%" scope="col"></th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let customer of customers">
                    <td (click)="getCustomer(customer.id);" style="cursor: pointer;" align="center">{{customer.id}}</td>
                    <td (click)="getCustomer(customer.id);" style="cursor: pointer;">{{customer.name}}</td>
                    <td (click)="getCustomer(customer.id);" style="cursor: pointer;">{{customer.email}}</td>
                    <td (click)="getCustomer(customer.id);" style="cursor: pointer;">{{customer.phone}}</td>
                    <td><a (click)="deleteCustomer(customer.id)" class="text-danger">Deletar</a></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

